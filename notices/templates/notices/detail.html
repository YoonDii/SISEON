{% extends 'base.html' %}
{% load django_bootstrap5%}
{% load static %}

{% block content %}

{% comment %} 조회수:{{ notices.hits }} {% endcomment %}
<div class='container'>
    {{notices.user.username}}
    {{notices.title}}
    <!-- 작성일자 -->
    {% if not notices.check %}
    <p class="date">{{notices.create_at|date:'Y/m/d'}}</p>
    <!-- 글이 수정될 경우 (수정됨)이 붙음 -->
    {% else %}
    <p class="edited">{{notices.updated_at|date:'Y/m/d'}}(수정됨)</p>
    {% endif %}
    {{notices.category}}
    <p id="content"><textarea>{{ notices.content }}</textarea></p>
  


  <!-- 수정 / 삭제 -->
  {% if request.user == notices.user %}
  {% if request.user.is_superuser %}
  <div class="buttons">
    <!-- 수정 버튼 -->
    <a href="{% url 'notices:update' notices.pk %}" class="edit-button">수정</a>

    <!-- 삭제 버튼 -->
    <form action="{% url 'notices:delete' notices.pk %}" method="POST">
      {% csrf_token %}
      <input type="submit" value="삭제" class="delete-button">
    </form>
  </div> 
</div><!-- buttons -->
  {% endif %}
  {% endif %}
  {% endblock %}
  {% block js %}
<script src="{% static 'js/mde/js/jquery.min.js' %}"></script>
<script src="{% static 'js/mde/js/lib/marked.min.js' %}"></script>
<script src="{% static 'js/mde/js/editormd.min.js' %}"></script>
<script src="{% static 'js/mde/js/lib/prettify.min.js' %}"></script>
<script src="{% static 'js/mde/js/lib/raphael.min.js' %}"></script>
<script src="{% static 'js/mde/js/lib/underscore.min.js' %}"></script>
<script src="{% static 'js/mde/js/lib/sequence-diagram.min.js' %}"></script>
<script src="{% static 'js/mde/js/lib/flowchart.min.js' %}"></script>
<script src="{% static 'js/mde/js/lib/jquery.flowchart.min.js' %}"></script>
<script>
  $(function () {
      // js markdown
      editormd.markdownToHTML("content", {
          emoji           : true,
          taskList        : true,
          tex             : true,  
          flowChart       : true,  
          sequenceDiagram : true,
      });
      console.log(obj)
      $(".reference-link").each(function (i,obj) {
        console.log(obj)
      })
  })
</script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
{% endblock js %}